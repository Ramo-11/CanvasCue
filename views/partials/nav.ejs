<!-- Navigation Bar -->
<nav class="navbar" id="navbar">
    <div class="nav-container">
        <!-- Logo/Brand -->
        <div class="nav-brand">
            <a href="/" class="brand-link">
                <svg
                    class="brand-logo"
                    width="40"
                    height="40"
                    viewBox="0 0 40 40"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <rect width="40" height="40" rx="8" fill="#3b82f6" />
                    <path
                        d="M10 20C10 14.4772 14.4772 10 20 10V10C25.5228 10 30 14.4772 30 20V20C30 25.5228 25.5228 30 20 30V30C14.4772 30 10 25.5228 10 20V20Z"
                        fill="white"
                        opacity="0.9"
                    />
                    <path
                        d="M15 18L20 23L25 18"
                        stroke="#3b82f6"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    />
                </svg>
                <span class="brand-text">CanvasCue</span>
            </a>
        </div>

        <!-- Mobile Menu Toggle -->
        <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
        </button>

        <!-- Navigation Links -->
        <div class="nav-menu" id="navMenu">
            <ul class="nav-list">
                <% if (!locals.currentUser) { %>
                <!-- Public Navigation -->
                <li class="nav-item">
                    <a href="/" class="nav-link" data-page="home">Home</a>
                </li>
                <li class="nav-item">
                    <a href="/#pricing" class="nav-link" data-page="pricing">Pricing</a>
                </li>
                <li class="nav-item">
                    <a href="/#how-it-works" class="nav-link" data-page="how-it-works"
                        >How It Works</a
                    >
                </li>
                <li class="nav-item">
                    <a href="/#faq" class="nav-link" data-page="faq">FAQ</a>
                </li>
                <% } else { %>
                <!-- Authenticated Navigation -->
                <li class="nav-item">
                    <a href="/dashboard" class="nav-link" data-page="dashboard">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a href="/requests" class="nav-link" data-page="requests">My Requests</a>
                </li>
                <li class="nav-item">
                    <a href="/subscription" class="nav-link" data-page="subscription"
                        >Subscription</a
                    >
                </li>
                <li class="nav-item dropdown" data-dropdown="account">
                    <a href="#" class="nav-link dropdown-toggle" data-page="account">
                        <span class="nav-user-name">
                            <%= locals.currentUser.displayName || locals.currentUser.email %>
                        </span>
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="/settings" class="dropdown-link" data-page="settings">
                            <i class="fas fa-cog"></i> Settings
                        </a>
                        <a href="/settings#brand" class="dropdown-link" data-page="brand">
                            <i class="fas fa-palette"></i> Brand Guidelines
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="/logout" class="dropdown-link">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                    </div>
                </li>
                <% } %>
            </ul>
        </div>

        <!-- Navigation Buttons -->
        <div class="nav-buttons">
            <% if (!locals.currentUser) { %>
            <a href="/login" class="nav-btn nav-btn-secondary">Login</a>
            <a href="/signup" class="nav-btn nav-btn-primary">Get Started</a>
            <% } else { %> <% if (locals.hasActiveSubscription) { %>
            <a href="/requests/new" class="nav-btn nav-btn-primary">
                <i class="fas fa-plus"></i> New Request
            </a>
            <% } else { %>
            <a href="/subscription" class="nav-btn nav-btn-primary">
                <i class="fas fa-crown"></i> Subscribe
            </a>
            <% } %>
            <!-- Notification Bell -->
            <div class="notifications-dropdown">
                <button class="notification-bell">
                    <i class="fas fa-bell notification-bell-icon"></i>
                    <span class="notification-badge" style="display: none">0</span>
                </button>
                <div class="notifications-panel">
                    <div class="notifications-header">
                        <h4>Notifications</h4>
                        <div class="notifications-header-actions">
                            <button class="mark-all-read">Mark all as read</button>
                        </div>
                    </div>
                    <div class="notifications-list">
                        <!-- Notifications will be loaded here -->
                    </div>
                    <div class="notifications-footer">
                        <a href="/notifications">View all notifications</a>
                    </div>
                </div>
            </div>
            <% } %>
        </div>
    </div>
</nav>

<!-- Mobile Menu Overlay -->
<div class="nav-overlay" id="navOverlay"></div>
